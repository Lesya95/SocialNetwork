{"version":3,"sources":["hoc/withAuthRedirect.js","components/common/Paginator/Paginator.module.css","components/Users/Users.module.css","components/common/Paginator/Paginator.jsx","components/Users/User.jsx","components/Users/Users.jsx","redux/users-selectors.js","components/Users/UsersContainer.jsx"],"names":["mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","module","exports","Paginator","totalUsersCount","pageSize","currentPage","onPageChanged","portionSize","pagesCount","Math","ceil","pages","p","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","className","styles","paginator","paginatorButton","onClick","filter","map","key","activePageNumber","pageNumber","e","User","user","followingInProgress","follow","unfollow","container","imgItem","id","imgUsers","src","photos","small","userPhoto","alt","infoItem","name","status","locationItem","buttonItem","followed","userButton","disabled","some","paginationForUsers","Users","users","getUsers","usersPage","getPageUserSize","getTotalUsersCount","getCurrentPage","getIsFetching","isFetching","getFollowingInProgress","UsersContainer","setCurrentPage","requestUsers","Preloader","compose"],"mappings":"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","file":"static/js/3.7e762a7a.chunk.js","sourcesContent":["import React from 'react';\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\n\r\nlet mapStateToPropsForRedirect = (state) => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n    }\r\n};\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n\r\n    class RedirectComponent extends React.Component{\r\n        render() {\r\n            if(!this.props.isAuth){ return <Redirect to='/login' />}\r\n\r\n            return <Component {...this.props} />\r\n        }\r\n    }\r\n\r\n    let ConnectAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n\r\n    return ConnectAuthRedirectComponent;\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pageNumber\":\"Paginator_pageNumber__35U5b\",\"activePageNumber\":\"Paginator_activePageNumber__3Hwd3\",\"paginatorButton\":\"Paginator_paginatorButton__2GyxG\",\"paginator\":\"Paginator_paginator___GHts\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imgUsers\":\"Users_imgUsers__tm14F\",\"container\":\"Users_container__3ya-g\",\"imgItem\":\"Users_imgItem__1I9HP\",\"infoItem\":\"Users_infoItem__2ilws\",\"locationItem\":\"Users_locationItem__2cLyD\",\"buttonItem\":\"Users_buttonItem__wfXuR\",\"userButton\":\"Users_userButton__22XIP\"};","import React, {useState} from \"react\";\r\nimport styles from './Paginator.module.css'\r\n\r\nlet Paginator = ({totalUsersCount, pageSize, currentPage, onPageChanged, portionSize = 21}) => {\r\n    let pagesCount = Math.ceil(totalUsersCount / pageSize);\r\n    let pages = [];\r\n    for (let p = 1; p <= pagesCount; p++) {\r\n        pages.push(p);\r\n    }\r\n    let portionCount = Math.ceil(pagesCount / portionSize);\r\n    let [portionNumber, setPortionNumber] = useState(1);\r\n    let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n    let rightPortionPageNumber = portionNumber * portionSize\r\n\r\n    return <div className={styles.paginator}>\r\n        {portionNumber > 1 && <button className={styles.paginatorButton} onClick={() => {setPortionNumber(portionNumber - 1)}}>{\" << \"}</button>}\r\n        {pages\r\n            .filter(p => p >= leftPortionPageNumber && p <=rightPortionPageNumber)\r\n            .map(p => {\r\n            return (\r\n                <span key={p} className={currentPage === p\r\n                    ? styles.activePageNumber\r\n                    : styles.pageNumber}\r\n                      onClick={(e) => {\r\n                          onPageChanged(p)\r\n                      }}\r\n                >{p}</span>)})\r\n        }\r\n        {portionCount > portionNumber && <button className={styles.paginatorButton} onClick={() => {setPortionNumber(portionNumber + 1)}}>{\" >> \"}</button>}\r\n    </div>\r\n}\r\n\r\nexport default Paginator;","import React from \"react\";\r\nimport styles from './Users.module.css'\r\nimport userPhoto from '../../assets/images/ava.jpg'\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nlet User = ({user, followingInProgress, follow, unfollow}) => {\r\n    return <div className={styles.container}>\r\n                            <div className={styles.imgItem}>\r\n                                <NavLink to={'/profile/' + user.id} >\r\n                                    <img className={styles.imgUsers} src={user.photos.small != null\r\n                                        ? user.photos.small\r\n                                        : userPhoto} alt=\"img\"/>\r\n                                </NavLink>\r\n                            </div>\r\n                            <div className={styles.infoItem}>\r\n                                <div>{user.name}</div>\r\n                                <div>{user.status}</div>\r\n                            </div>\r\n                            <div className={styles.locationItem}>\r\n                                <div>{'user.location.country'}</div>\r\n                                <div>{'user.location.city'}</div>\r\n                            </div>\r\n                            <div className={styles.buttonItem}>\r\n                                {user.followed\r\n                                    ? <button className={styles.userButton}\r\n                                        disabled={followingInProgress.some(id => id === user.id)}\r\n                                        onClick={() => {\r\n                                           unfollow(user.id)\r\n                                        }}>unfollowed</button>\r\n                                    : <button className={styles.userButton}\r\n                                        disabled={followingInProgress.some(id => id === user.id)}\r\n                                        onClick={() => {\r\n                                            follow(user.id)\r\n                                        }}>followed</button>}\r\n                            </div>\r\n                        </div>\r\n}\r\n\r\nexport default User;","import React from \"react\";\r\nimport Paginator from \"../common/Paginator/Paginator\";\r\nimport User from \"./User\";\r\n\r\nconst paginationForUsers = ({currentPage, onPageChanged, totalUsersCount, pageSize}) => {\r\n    return <Paginator currentPage={currentPage}\r\n                      onPageChanged={onPageChanged}\r\n                      totalUsersCount={totalUsersCount}\r\n                      pageSize={pageSize}/>\r\n}\r\n\r\nlet Users = ({currentPage, onPageChanged, totalUsersCount, pageSize, ...props}) => {\r\n    return (\r\n        <div>\r\n            <h2>Users</h2>\r\n            {paginationForUsers({\r\n                currentPage,\r\n                onPageChanged,\r\n                totalUsersCount,\r\n                pageSize})\r\n            }\r\n            {\r\n                props.users.map(user => (\r\n                    <User user={user}\r\n                              followingInProgress={props.followingInProgress}\r\n                              unfollow={props.unfollow}\r\n                              follow={props.follow}\r\n                              key={user.id}\r\n                    />)\r\n                )\r\n            }\r\n            {paginationForUsers({\r\n                currentPage,\r\n                onPageChanged,\r\n                totalUsersCount,\r\n                pageSize})\r\n            }\r\n            <button onClick={props.getUsers}>Get users</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Users;","export const getUsers = (state) => {\r\n    return state.usersPage.users\r\n}\r\nexport const getPageUserSize = (state) => {\r\n    return state.usersPage.pageSize\r\n}\r\nexport const getTotalUsersCount = (state) => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\nexport const getCurrentPage = (state) => {\r\n    return state.usersPage.currentPage\r\n}\r\nexport const getIsFetching = (state) => {\r\n    return state.usersPage.isFetching\r\n}\r\nexport const getFollowingInProgress = (state) => {\r\n    return state.usersPage.followingInProgress\r\n}","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport Users from \"./Users\";\r\nimport {\r\n    follow, requestUsers,\r\n    setCurrentPage, unfollow\r\n} from \"../../redux/users-reducer\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\nimport {compose} from \"redux\";\r\nimport {\r\n    getPageUserSize, getUsers,\r\n    getTotalUsersCount, getCurrentPage,\r\n    getIsFetching, getFollowingInProgress\r\n} from \"../../redux/users-selectors\";\r\n\r\nclass UsersContainer extends React.Component{\r\n\r\n    componentDidMount() {\r\n        const {currentPage, pageSize, requestUsers} = this.props;\r\n        requestUsers(currentPage,pageSize);\r\n    }\r\n\r\n    onPageChanged = (pageNumber) => {\r\n        const {setCurrentPage, requestUsers,pageSize} = this.props;\r\n        setCurrentPage(pageNumber);\r\n        requestUsers(pageNumber, pageSize);\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n            {this.props.isFetching ? <Preloader/> : null}\r\n            <Users totalUsersCount={this.props.totalUsersCount}\r\n                   pageSize={this.props.pageSize}\r\n                   users={this.props.users}\r\n                   getUsers={this.getUsers}\r\n                   currentPage={this.props.currentPage}\r\n                   onPageChanged={this.onPageChanged}\r\n                   unfollow={this.props.unfollow}\r\n                   follow={this.props.follow}\r\n                   followingInProgress={this.props.followingInProgress}\r\n            />\r\n        </>\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        users: getUsers(state),\r\n        pageSize: getPageUserSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state),\r\n    };\r\n};\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, {\r\n        setCurrentPage,\r\n        requestUsers,\r\n        unfollow,\r\n        follow,\r\n    }),\r\n    withAuthRedirect\r\n)(UsersContainer)"],"sourceRoot":""}